'use strict';

var _defineProperty = require('@babel/runtime/helpers/defineProperty');
var _slicedToArray = require('@babel/runtime/helpers/slicedToArray');
var React = require('react');
var classNames = require('classnames');
var jsxRuntime = require('react/jsx-runtime');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

function _interopNamespace(e) {
  if (e && e.__esModule) return e;
  var n = Object.create(null);
  if (e) {
    Object.keys(e).forEach(function (k) {
      if (k !== 'default') {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function () { return e[k]; }
        });
      }
    });
  }
  n["default"] = e;
  return Object.freeze(n);
}

var _defineProperty__default = /*#__PURE__*/_interopDefaultLegacy(_defineProperty);
var _slicedToArray__default = /*#__PURE__*/_interopDefaultLegacy(_slicedToArray);
var React__namespace = /*#__PURE__*/_interopNamespace(React);
var classNames__default = /*#__PURE__*/_interopDefaultLegacy(classNames);

function styleInject(css, ref) {
  if (ref === void 0) ref = {};
  var insertAt = ref.insertAt;

  if (!css || typeof document === 'undefined') {
    return;
  }

  var head = document.head || document.getElementsByTagName('head')[0];
  var style = document.createElement('style');
  style.type = 'text/css';

  if (insertAt === 'top') {
    if (head.firstChild) {
      head.insertBefore(style, head.firstChild);
    } else {
      head.appendChild(style);
    }
  } else {
    head.appendChild(style);
  }

  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    style.appendChild(document.createTextNode(css));
  }
}

var css_248z$9 = ".index-module_video-player__SXK1I {\n  display: inline-block;\n  position: relative;\n  max-width: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  background-color: #000;\n  overflow: hidden;\n}\n\n.index-module_video-player__SXK1I.hide-controls {\n  cursor: none;\n}\n";
var styles$8 = {"video-player":"index-module_video-player__SXK1I"};
styleInject(css_248z$9);

var _path$5, _path2$4;

function _extends$5() { _extends$5 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$5.apply(this, arguments); }

const SvgPause = props => /*#__PURE__*/React__namespace.createElement("svg", _extends$5({
  width: 131,
  height: 270,
  viewBox: "0 0 131 270",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path$5 || (_path$5 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M19.1068 269.413H18.1599C8.58655 269.413 0.840088 261.653 0.840088 252.093V17.4667C0.840088 7.8934 8.58655 0.146679 18.1599 0.146679H19.1068C28.6801 0.146679 36.4265 7.8934 36.4265 17.4667V252.093C36.4265 261.653 28.6801 269.413 19.1068 269.413Z",
  fill: "#211D1D"
})), _path2$4 || (_path2$4 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M113.28 269.413H112.333C102.76 269.413 95.0132 261.653 95.0132 252.093V17.4667C95.0132 7.8934 102.76 0.146679 112.333 0.146679H113.28C122.853 0.146679 130.6 7.8934 130.6 17.4667V252.093C130.6 261.653 122.853 269.413 113.28 269.413Z",
  fill: "#211D1D"
})));

var css_248z$8 = ".VideoScreen-module_video-screen__82LyA {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.VideoScreen-module_title__d0tgO {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 5;\n  padding: 15px 20px;\n  padding-bottom: 30px;\n  font-size: 16px;\n  color: #fff;\n  text-align: left;\n  background: rgba(0, 0, 0, 0.3);\n  background: linear-gradient(\n    180deg,\n    rgba(0, 0, 0, 0.7) 0%,\n    rgba(0, 0, 0, 0.3) 50%,\n    rgba(255, 255, 255, 0) 100%\n  );\n  cursor: default;\n  transition: opacity 0.3s cubic-bezier(0.075, 0.82, 0.165, 1);\n}\n\n.hide-controls .VideoScreen-module_title__d0tgO {\n  opacity: 0;\n}\n\n.VideoScreen-module_play-overlay__APLqw {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  transition: all 0.3s ease;\n}\n\n.VideoScreen-module_play-overlay__APLqw svg {\n  width: 4%;\n  height: auto;\n}\n\n.VideoScreen-module_play-overlay__APLqw svg path {\n  fill: #fff;\n}\n\n.VideoScreen-module_video-poster__Afbhw {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #000;\n}\n\n.VideoScreen-module_video-poster__Afbhw img {\n  max-width: 100%;\n  height: auto;\n}\n\n.VideoScreen-module_video__fjZuo {\n  display: block;\n  max-width: 100%;\n  max-height: 100%;\n  height: auto;\n  background-color: #000;\n}\n\n.VideoScreen-module_video__fjZuo::cue {\n  visibility: hidden;\n  opacity: 0;\n}\n\n.fullscreen .VideoScreen-module_video__fjZuo {\n  width: 100%;\n}\n\n.fullscreen .VideoScreen-module_title__d0tgO {\n  font-size: 24px;\n}\n\n.playing .VideoScreen-module_video-poster__Afbhw,\n.paused .VideoScreen-module_video-poster__Afbhw {\n  display: none;\n}\n\n@media screen and (max-width: 767px) {\n  .VideoScreen-module_title__d0tgO,\n  .fullscreen .VideoScreen-module_title__d0tgO {\n    font-size: 15px;\n  }\n}\n";
var styles$7 = {"video-screen":"VideoScreen-module_video-screen__82LyA","title":"VideoScreen-module_title__d0tgO","play-overlay":"VideoScreen-module_play-overlay__APLqw","video-poster":"VideoScreen-module_video-poster__Afbhw","video":"VideoScreen-module_video__fjZuo"};
styleInject(css_248z$8);

function VideoScreen(_ref) {
  let {
    videoRef,
    children,
    poster,
    hidePoster,
    title,
    style,
    status,
    onPlay,
    onPause,
    onLoadedData,
    onTimeUpdate,
    onClick,
    onEnded
  } = _ref;
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: styles$7['video-screen'],
    onClick: onClick,
    children: [!hidePoster && /*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$7['video-poster'],
      children: /*#__PURE__*/jsxRuntime.jsx("img", {
        src: poster,
        alt: "Poster"
      })
    }), /*#__PURE__*/jsxRuntime.jsxs("video", {
      className: styles$7.video,
      ref: videoRef,
      onPlay: onPlay,
      onPause: onPause,
      onLoadedData: onLoadedData,
      onTimeUpdate: onTimeUpdate,
      onEnded: onEnded,
      style: { ...style
      },
      children: [children, "Sorry, your browser doesn't support embedded videos."]
    }), title && /*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$7.title,
      children: title
    }), status && /*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$7['play-overlay'],
      style: {
        opacity: status === 'playing' ? 0 : 1
      },
      children: /*#__PURE__*/jsxRuntime.jsx(SvgPause, {})
    })]
  });
}

var _path$4;

function _extends$4() { _extends$4 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$4.apply(this, arguments); }

const SvgPlay = props => /*#__PURE__*/React__namespace.createElement("svg", _extends$4({
  width: 237,
  height: 270,
  viewBox: "0 0 237 270",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path$4 || (_path$4 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M231.467 125.947L15.96 1.52019C9.15998 -2.39981 0.666626 2.50683 0.666626 10.3602V259.2C0.666626 267.053 9.15998 271.96 15.96 268.04L231.467 143.613C238.267 139.68 238.267 129.867 231.467 125.947",
  fill: "#211D1D"
})));

var _path$3, _path2$3, _path3$2, _path4$1;

function _extends$3() { _extends$3 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$3.apply(this, arguments); }

const SvgFullscreen = props => /*#__PURE__*/React__namespace.createElement("svg", _extends$3({
  width: 338,
  height: 277,
  viewBox: "0 0 338 277",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path$3 || (_path$3 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M229.027 26.7734H309.4L309.853 111.413C309.893 118.547 315.734 124.347 322.947 124.347C326.427 124.333 329.68 122.96 332.133 120.493C334.573 118.013 335.907 114.747 335.893 111.267L335.36 13.68C335.36 13.2267 335.32 12.8 335.253 12.3467C335.227 11.92 335.173 11.4934 335.093 11.1201C335.013 10.6801 334.88 10.28 334.72 9.81334C334.613 9.42667 334.493 9.04011 334.32 8.65344C334.16 8.25344 333.96 7.88009 333.733 7.49342C333.547 7.12009 333.347 6.77344 333.12 6.45344C332.88 6.09344 332.6 5.74673 332.293 5.40006C332.067 5.10673 331.827 4.82678 331.52 4.52011C331.213 4.21344 330.88 3.93339 330.533 3.66673C330.24 3.41339 329.933 3.17342 329.627 2.96008C329.267 2.72008 328.867 2.49339 328.414 2.26673C328.094 2.08006 327.76 1.90675 327.4 1.76008C326.96 1.57342 326.494 1.42667 325.947 1.28001C325.654 1.17334 325.334 1.08006 324.947 1.00006C324.094 0.826725 323.227 0.733392 322.307 0.733392H229.027C221.84 0.733392 216 6.57342 216 13.7601C216 20.9334 221.84 26.7734 229.027 26.7734",
  fill: "#211D1D"
})), _path2$3 || (_path2$3 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M324.6 157.107C317.413 157.107 311.573 162.947 311.573 170.133V250.507L226.947 250.96C219.8 251 214 256.84 214 264.04C214.013 267.52 215.387 270.787 217.853 273.24C220.32 275.667 223.56 277 227.014 277C227.04 277 227.054 277 227.08 277L324.627 276.467C325.093 276.467 325.547 276.427 326 276.36C326.413 276.333 326.827 276.28 327.28 276.187C327.694 276.107 328.08 275.987 328.52 275.84C328.933 275.72 329.333 275.587 329.653 275.44C330.067 275.267 330.453 275.067 330.853 274.827C331.213 274.653 331.56 274.453 331.92 274.213C332.267 273.973 332.6 273.707 332.947 273.4C333.24 273.173 333.52 272.933 333.827 272.627C334.133 272.32 334.4 272 334.68 271.627C334.947 271.333 335.187 271.04 335.387 270.733C335.64 270.36 335.854 269.96 336.08 269.52C336.267 269.2 336.427 268.88 336.587 268.52C336.773 268.08 336.92 267.613 337.067 267.067C337.173 266.747 337.267 266.44 337.347 266.053C337.52 265.2 337.614 264.32 337.614 263.413V170.133C337.614 162.947 331.773 157.107 324.6 157.107",
  fill: "#211D1D"
})), _path3$2 || (_path3$2 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M108.88 250.96H28.4933L28.0399 166.32C27.9999 159.187 22.16 153.373 14.96 153.373C7.77332 153.427 1.97342 159.293 2.00009 166.467L2.53342 264.013C2.53342 264.48 2.57327 264.933 2.63994 265.387C2.67994 265.8 2.72004 266.213 2.81337 266.667C2.90671 267.08 3.0266 267.48 3.17327 267.92C3.27994 268.307 3.41327 268.693 3.57327 269.08C3.7466 269.48 3.9466 269.853 4.17327 270.24C4.35994 270.6 4.5466 270.947 4.77327 271.28C5.01327 271.64 5.29337 271.973 5.61337 272.347C5.84004 272.627 6.0666 272.907 6.37327 273.213C6.67994 273.507 6.99999 273.787 7.35999 274.067C7.65332 274.32 7.97332 274.56 8.29332 274.787C8.65332 275.027 9.04009 275.24 9.46676 275.453C9.80009 275.653 10.1467 275.827 10.48 275.973C10.92 276.16 11.3734 276.293 11.9467 276.453C12.28 276.573 12.6 276.667 12.9467 276.733C13.8134 276.907 14.6801 277 15.5868 277H108.88C116.053 277 121.893 271.16 121.893 263.973C121.893 256.8 116.053 250.96 108.88 250.96",
  fill: "#211D1D"
})), _path4$1 || (_path4$1 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M26.0268 107.987V27.6L110.667 27.1468C117.8 27.1068 123.613 21.2667 123.613 14.0667C123.6 10.5733 122.227 7.32001 119.747 4.86667C117.293 2.44001 114.04 1.10678 110.6 1.10678C110.573 1.10678 110.547 1.10678 110.52 1.10678L12.9333 1.64011C12.4933 1.64011 12.0533 1.68009 11.6 1.74675C11.1733 1.77342 10.7468 1.82678 10.3734 1.90678C9.94677 2.00011 9.53328 2.12009 9.07995 2.28009C8.67995 2.38675 8.29344 2.50675 7.90677 2.68009C7.5201 2.84009 7.14661 3.04009 6.74661 3.28009C6.38661 3.45342 6.04016 3.65337 5.69349 3.89337C5.34682 4.13337 5.02677 4.38673 4.6401 4.72006C4.34677 4.94673 4.06667 5.18673 3.8 5.45339C3.49333 5.76006 3.21339 6.09342 2.92005 6.48008C2.66672 6.77342 2.42682 7.08011 2.22682 7.37344C1.97349 7.73344 1.76 8.13344 1.53333 8.57344C1.33333 8.90678 1.16016 9.26678 1.02682 9.57344C0.840156 10.0134 0.693333 10.4667 0.533333 11.0534C0.426667 11.3734 0.320052 11.7067 0.253385 12.0534C0.0800521 12.9067 0 13.7867 0 14.6934V107.987C0 115.16 5.83995 121 13.0133 121C20.1866 121 26.0268 115.16 26.0268 107.987",
  fill: "#211D1D"
})));

var _path$2, _path2$2, _path3$1, _path4;

function _extends$2() { _extends$2 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$2.apply(this, arguments); }

const SvgFullscreenExit = props => /*#__PURE__*/React__namespace.createElement("svg", _extends$2({
  width: 278,
  height: 278,
  viewBox: "0 0 278 278",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path$2 || (_path$2 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M162.666 104.307C162.693 104.72 162.746 105.12 162.826 105.493C162.906 105.907 163.026 106.307 163.173 106.72C163.28 107.107 163.413 107.493 163.573 107.867C163.733 108.24 163.92 108.6 164.146 108.973C164.32 109.307 164.493 109.64 164.72 109.96C164.96 110.32 165.226 110.64 165.52 110.973C165.733 111.253 165.96 111.52 166.253 111.813C166.546 112.107 166.866 112.373 167.186 112.627C167.48 112.867 167.773 113.107 168.08 113.32C168.453 113.56 168.84 113.773 169.2 113.96C169.533 114.147 169.866 114.333 170.2 114.467C170.626 114.653 171.08 114.787 171.586 114.933C171.92 115.04 172.253 115.133 172.546 115.187C173.373 115.36 174.213 115.453 175.093 115.453H261.2C268.093 115.453 273.693 109.84 273.693 102.947C273.693 96.0667 268.093 90.4534 261.2 90.4534H187.493L187.066 12.8267C187.04 5.9734 181.426 0.400043 174.506 0.400043C171.173 0.413376 168.04 1.73335 165.693 4.10668C163.346 6.48002 162.066 9.6134 162.08 12.9601L162.573 102.987C162.573 103.44 162.613 103.88 162.666 104.307Z",
  fill: "#211D1D"
})), _path2$2 || (_path2$2 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M273.92 165.96C271.56 163.627 268.44 162.347 265.133 162.347C265.107 162.347 265.08 162.347 265.053 162.347L175.027 162.84C174.573 162.84 174.133 162.88 173.707 162.933C173.293 162.973 172.893 163.013 172.52 163.093C172.107 163.187 171.707 163.307 171.293 163.44C170.907 163.56 170.533 163.68 170.147 163.84C169.773 164 169.4 164.2 169.053 164.413C168.707 164.587 168.373 164.76 168.053 164.987C167.707 165.227 167.387 165.48 167.04 165.787C166.747 166.013 166.48 166.24 166.227 166.507C165.92 166.8 165.64 167.133 165.387 167.48C165.147 167.747 164.933 168.013 164.693 168.36C164.453 168.72 164.24 169.107 164.053 169.467C163.867 169.8 163.693 170.133 163.547 170.467C163.373 170.88 163.227 171.32 163.08 171.867C162.973 172.2 162.88 172.52 162.827 172.813C162.653 173.64 162.56 174.48 162.56 175.36V261.467C162.56 268.36 168.173 273.96 175.067 273.96C181.947 273.96 187.56 268.36 187.56 261.467V187.76L265.2 187.347C272.04 187.307 277.627 181.693 277.627 174.773C277.6 171.44 276.28 168.307 273.92 165.96",
  fill: "#211D1D"
})), _path3$1 || (_path3$1 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M115.08 173.987C115.04 173.573 115 173.16 114.92 172.787C114.827 172.373 114.707 171.987 114.573 171.56C114.453 171.173 114.333 170.8 114.187 170.467C114.027 170.067 113.827 169.68 113.6 169.32C113.427 168.973 113.253 168.653 113.053 168.347C112.813 168 112.533 167.667 112.24 167.32C112 167.013 111.76 166.733 111.507 166.493C111.213 166.187 110.88 165.907 110.547 165.653C110.28 165.413 110 165.2 109.627 164.947C109.28 164.707 108.907 164.507 108.56 164.333C108.227 164.133 107.88 163.96 107.547 163.827C107.133 163.64 106.68 163.493 106.133 163.347C105.84 163.24 105.52 163.16 105.2 163.093C104.387 162.92 103.533 162.84 102.653 162.84H16.5466C9.65324 162.84 4.05334 168.44 4.05334 175.333C4.05334 182.227 9.65324 187.827 16.5466 187.827H90.2533L90.6799 265.467C90.7066 272.32 96.3199 277.893 103.24 277.893C106.573 277.867 109.707 276.56 112.053 274.187C114.4 271.813 115.68 268.667 115.667 265.333L115.173 175.253C115.173 174.813 115.133 174.387 115.08 173.987",
  fill: "#211D1D"
})), _path4 || (_path4 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M12.6934 115.933L102.773 115.453C103.2 115.44 103.627 115.4 104.027 115.347C104.44 115.32 104.853 115.267 105.227 115.187C105.64 115.107 106.04 114.987 106.453 114.84C106.84 114.733 107.213 114.6 107.547 114.467C107.947 114.293 108.32 114.093 108.72 113.867C109.04 113.693 109.373 113.52 109.667 113.32C110.013 113.08 110.347 112.813 110.693 112.507C110.987 112.28 111.267 112.04 111.547 111.76C111.84 111.467 112.107 111.147 112.36 110.827C112.6 110.533 112.84 110.24 113.053 109.933C113.293 109.56 113.507 109.173 113.68 108.827C113.88 108.493 114.053 108.147 114.187 107.827C114.373 107.4 114.52 106.96 114.667 106.413C114.773 106.093 114.867 105.76 114.92 105.48C115.093 104.653 115.173 103.8 115.173 102.92V16.8134C115.173 9.9201 109.573 4.32007 102.68 4.32007C95.8 4.32007 90.1868 9.9201 90.1868 16.8134V90.5201L12.5467 90.9468C5.69335 90.9868 0.120117 96.5867 0.120117 103.507C0.146784 106.84 1.45337 109.973 3.84004 112.32C6.18671 114.653 9.30668 115.933 12.6133 115.933C12.64 115.933 12.6668 115.933 12.6934 115.933",
  fill: "#211D1D"
})));

var css_248z$7 = ".progress-container {\n  --bullet-size: 12px;\n\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  position: relative;\n  width: 100%;\n  min-width: 60px;\n  height: 100%;\n  cursor: pointer;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 3px;\n  background-color: rgba(255, 255, 255, 0.3);\n}\n\n.progress-line {\n  position: absolute;\n  width: 100%;\n  background-color: #fff;\n  height: 3px;\n}\n\n.progress-bullet {\n  position: absolute;\n  width: var(--bullet-size);\n  height: var(--bullet-size);\n  left: calc(-1 * var(--bullet-size) / 2);\n  background-color: #fff;\n  border-radius: 100%;\n  cursor: pointer;\n}\n\n.progress-bullet .inner {\n  width: 100%;\n  height: 100%;\n  background-color: inherit;\n  border-radius: 100%;\n  cursor: pointer;\n}\n";
styleInject(css_248z$7);

function ProgressBar(_ref) {
  let {
    className,
    defaultValue,
    onDrag,
    onDragStop,
    onHover,
    onProgressDown
  } = _ref;
  const ref = React.useRef(null);
  const [dragging, setDragging] = React.useState(null);
  const [posx, setPosx] = React.useState(null);
  const handleContainerWidth = React.useCallback(() => {
    const refClientRects = ref.current.getClientRects()[0];
    return refClientRects.width;
  }, []);
  const handleBulletPosition = React.useCallback(event => {
    let mousePosition;

    if (event.type === 'touchmove') {
      mousePosition = event.touches[0].clientX;
    } else if (event.type === 'touchend') {
      mousePosition = event.changedTouches[0].clientX;
    } else {
      mousePosition = event.clientX;
    }

    const refClientRects = ref.current.getClientRects()[0];
    const refStartPosition = refClientRects.left;
    const containerWidth = handleContainerWidth();
    const refEndPosition = refStartPosition + containerWidth;
    let val;

    if (mousePosition < refStartPosition) {
      val = 0;
    } else if (mousePosition > refEndPosition) {
      val = containerWidth;
    } else {
      val = mousePosition - refStartPosition;
    }

    return val;
  }, [handleContainerWidth]);
  const calcBulletPosition = React.useCallback(val => {
    const containerWidth = handleContainerWidth();
    return val * containerWidth / 100;
  }, [handleContainerWidth]);
  const calculatePercentage = React.useCallback(event => {
    const val = handleBulletPosition(event);
    const containerWidth = handleContainerWidth();
    return val / containerWidth * 100;
  }, [handleContainerWidth, handleBulletPosition]);
  const onMouseMove = React.useCallback(event => {
    const bulletPosX = calcBulletPosition(calculatePercentage(event));
    setPosx(bulletPosX);
    onDrag && onDrag(calculatePercentage(event), event);
  }, [calcBulletPosition, onDrag, calculatePercentage]);
  const onMouseUp = React.useCallback(event => {
    document.removeEventListener('mousemove', onMouseMove);
    document.removeEventListener('mouseup', onMouseUp);
    setDragging(false);

    if (onDragStop) {
      onDragStop(calculatePercentage(event), event);
    }
  }, [onMouseMove, onDragStop, calculatePercentage]);
  const onTouchEnd = React.useCallback(event => {
    setDragging(false);

    if (onDragStop) {
      onDragStop(calculatePercentage(event), event);
    }
  }, [onDragStop, calculatePercentage]);
  const handleMouseDown = React.useCallback(() => {
    document.addEventListener('mousemove', onMouseMove, false);
    document.addEventListener('mouseup', onMouseUp, false);
    setDragging(true);
  }, [onMouseMove, onMouseUp]);
  const onWrapperMouseMove = React.useCallback(event => {
    if (onHover) {
      onHover(calculatePercentage(event));
    }
  }, [onHover, calculatePercentage]);
  const onWrapperMouseDown = React.useCallback(event => {
    handleMouseDown(event);
    onMouseMove(event);

    if (onProgressDown) {
      onProgressDown(calculatePercentage(event), event);
    }
  }, [handleMouseDown, onMouseMove, calculatePercentage, onProgressDown]);
  React.useEffect(() => {
    setPosx(calcBulletPosition(defaultValue));
  }, [defaultValue, calcBulletPosition]);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    ref: ref,
    className: classNames__default["default"]('progress-container', className),
    "data-dragging": dragging,
    onMouseMove: onWrapperMouseMove,
    onMouseDown: onWrapperMouseDown,
    children: [/*#__PURE__*/jsxRuntime.jsx("div", {
      className: "progress-bar"
    }), /*#__PURE__*/jsxRuntime.jsx("div", {
      className: "progress-line",
      style: {
        width: `${posx}px`
      }
    }), /*#__PURE__*/jsxRuntime.jsx("div", {
      className: "progress-bullet",
      draggable: "false",
      style: {
        transform: `translateX(${posx}px)`
      },
      onMouseDown: handleMouseDown,
      onTouchMove: onMouseMove,
      onTouchEnd: onTouchEnd,
      children: /*#__PURE__*/jsxRuntime.jsx("div", {
        className: "inner"
      })
    })]
  });
}

var css_248z$6 = ".Button-module_button__cPzWA {\n  width: 32px;\n  height: 100%;\n  flex-shrink: 0;\n  padding: 0 8px;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.Button-module_button__cPzWA svg {\n  width: 100%;\n  height: 100%;\n  max-height: 25px;\n}\n\n.Button-module_button__cPzWA svg path {\n  fill: #fff;\n}\n\n.fullscreen .Button-module_button__cPzWA {\n  width: 45px;\n  height: 100%;\n}\n\n@media screen and (max-width: 767px) {\n  .fullscreen .Button-module_button__cPzWA {\n    width: 32px;\n  }\n}\n";
var styles$6 = {"button":"Button-module_button__cPzWA"};
styleInject(css_248z$6);

function Button(_ref) {
  let {
    className,
    onClick,
    children
  } = _ref;
  return /*#__PURE__*/jsxRuntime.jsx("button", {
    className: classNames__default["default"](styles$6.button, className),
    onClick: onClick,
    children: children
  });
}

var _path$1, _path2$1, _path3;

function _extends$1() { _extends$1 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends$1.apply(this, arguments); }

const SvgVolume = props => /*#__PURE__*/React__namespace.createElement("svg", _extends$1({
  width: 345,
  height: 269,
  viewBox: "0 0 345 269",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path$1 || (_path$1 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M148.007 29.3468L84.472 73.6402H17.4066C8.16127 73.6402 0.666626 81.1469 0.666626 90.3869V173.774C0.666626 183.027 8.16127 190.52 17.4066 190.52H84.472L148.007 234.813C152.799 238.16 159.368 234.734 159.368 228.894V35.2801C159.368 29.4268 152.799 26.0001 148.007 29.3468",
  fill: "#211D1D"
})), _path2$1 || (_path2$1 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M282.097 268.76C279.093 268.76 276.091 267.613 273.797 265.333C269.201 260.747 269.192 253.307 273.776 248.707C304.124 218.28 320.837 177.853 320.837 134.88C320.837 91.8934 304.119 51.4668 273.763 21.0401C269.177 16.4401 269.185 9.00007 273.779 4.4134C278.38 -0.173264 285.82 -0.159904 290.401 4.4401C325.185 39.2934 344.343 85.6267 344.343 134.88C344.343 184.12 325.193 230.44 290.417 265.307C288.123 267.613 285.109 268.76 282.097 268.76",
  fill: "#211D1D"
})), _path3 || (_path3 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M236.529 224.773C233.527 224.773 230.524 223.64 228.228 221.347C223.635 216.76 223.624 209.32 228.208 204.72C246.831 186.053 257.085 161.253 257.085 134.88C257.085 108.493 246.827 83.6934 228.2 65.0267C223.615 60.4267 223.623 52.9867 228.217 48.4C232.816 43.8134 240.255 43.8266 244.839 48.4133C267.895 71.52 280.591 102.227 280.591 134.88C280.591 167.52 267.899 198.213 244.851 221.32C242.555 223.627 239.541 224.773 236.529 224.773",
  fill: "#211D1D"
})));

var _path, _path2;

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

const SvgMute = props => /*#__PURE__*/React__namespace.createElement("svg", _extends({
  width: 339,
  height: 208,
  viewBox: "0 0 339 208",
  fill: "none",
  xmlns: "http://www.w3.org/2000/svg"
}, props), _path || (_path = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M298.933 103.88L335.84 66.9734C339.387 63.4268 339.387 57.6668 335.84 54.1202L335.48 53.7734C331.933 50.2268 326.187 50.2268 322.64 53.7734L285.733 90.6801L248.826 53.7734C245.28 50.2268 239.533 50.2268 235.987 53.7734L235.64 54.1202C232.08 57.6668 232.08 63.4268 235.64 66.9734L272.533 103.88L235.64 140.773C232.08 144.32 232.08 150.08 235.64 153.627L235.987 153.973C239.533 157.52 245.28 157.52 248.826 153.973L285.733 117.067L322.64 153.973C326.187 157.52 331.933 157.52 335.48 153.973L335.84 153.627C339.387 150.08 339.387 144.32 335.84 140.773L298.933 103.88Z",
  fill: "#211D1D"
})), _path2 || (_path2 = /*#__PURE__*/React__namespace.createElement("path", {
  d: "M146.64 1.64004L83.4133 45.7201H16.68C7.47997 45.7201 0.0133057 53.1868 0.0133057 62.3868V145.36C0.0133057 154.56 7.47997 162.027 16.68 162.027H83.4133L146.64 206.107C151.413 209.44 157.947 206.027 157.947 200.213V7.53339C157.947 1.72006 151.413 -1.67996 146.64 1.64004Z",
  fill: "#211D1D"
})));

var css_248z$5 = ".VolumeControl-module_volume-control__mjcgl {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n\n.VolumeControl-module_volume-control-button__fp9-n {\n  width: 40px;\n  flex-shrink: 0;\n}\n\n.fullscreen .VolumeControl-module_volume-control__mjcgl .VolumeControl-module_volume-progress__nGQQc {\n  width: 78px;\n}\n\n.VolumeControl-module_volume-progress__nGQQc {\n  max-width: 0;\n  height: 40px;\n  overflow-x: hidden;\n  transition: max-width 0.8s ease-in 0s;\n}\n\n.VolumeControl-module_volume-progress-inner__qYHVj {\n  height: 100%;\n  padding: 0 6px;\n}\n\n.VolumeControl-module_volume-control__mjcgl.VolumeControl-module_open__6UTao .VolumeControl-module_volume-progress__nGQQc,\n.VolumeControl-module_volume-control__mjcgl[data-dragging-bullet='true'] .VolumeControl-module_volume-progress__nGQQc {\n  max-width: 999px;\n}\n";
var styles$5 = {"volume-control":"VolumeControl-module_volume-control__mjcgl","volume-control-button":"VolumeControl-module_volume-control-button__fp9-n","volume-progress":"VolumeControl-module_volume-progress__nGQQc","volume-progress-inner":"VolumeControl-module_volume-progress-inner__qYHVj","open":"VolumeControl-module_open__6UTao"};
styleInject(css_248z$5);

function VolumeControl(_ref) {
  let {
    volume,
    soundStatus,
    onVolumeClick,
    onVolumeChange
  } = _ref;
  const [draggingBullet, setDraggingBullet] = React.useState(false);
  const [clicked, setClicked] = React.useState(false);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: classNames__default["default"](styles$5['volume-control'], {
      [styles$5.open]: clicked
    }),
    "data-dragging-bullet": draggingBullet,
    onClick: () => setClicked(true),
    onMouseEnter: () => setClicked(true),
    onMouseLeave: () => setClicked(false),
    children: [/*#__PURE__*/jsxRuntime.jsx(Button, {
      className: styles$5['volume-control-button'],
      onClick: event => {
        onVolumeClick(event);
        setClicked(true);
      },
      children: soundStatus === 'muted' ? /*#__PURE__*/jsxRuntime.jsx(SvgMute, {}) : /*#__PURE__*/jsxRuntime.jsx(SvgVolume, {})
    }), /*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$5['volume-progress'],
      children: /*#__PURE__*/jsxRuntime.jsx("div", {
        className: styles$5['volume-progress-inner'],
        children: /*#__PURE__*/jsxRuntime.jsx(ProgressBar, {
          defaultValue: volume,
          onDrag: event => {
            onVolumeChange(event);
            setDraggingBullet(true);
          },
          onDragStop: () => {
            setDraggingBullet(false);
            setClicked(false);
          }
        })
      })
    })]
  });
}

var css_248z$4 = ".SelectionList-module_selection-area__LHO43 {\n  --background-color: rgba(0, 0, 0, 0.6);\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.SelectionList-module_selection-area__LHO43 button {\n  width: 44px;\n  height: 32px;\n  padding: 0;\n  border: none;\n  background-color: transparent;\n  color: #fff;\n  cursor: pointer;\n  font-size: inherit;\n  border-radius: 4px;\n}\n\n.SelectionList-module_selection-area__LHO43.SelectionList-module_open__YSbaa button {\n  background-color: var(--background-color);\n}\n\n.SelectionList-module_selection-list__GVyxt {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  width: 100%;\n  overflow-x: auto;\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 100%;\n  margin: 0;\n  padding: 0 20px;\n  list-style: none;\n  background-color: var(--background-color);\n  color: #fff;\n  font-size: 14px;\n}\n\n.SelectionList-module_selection-list__GVyxt .SelectionList-module_item__h8jzG {\n  flex-shrink: 0;\n  padding: 16px 18px;\n  cursor: pointer;\n}\n\n.SelectionList-module_selection-list__GVyxt .SelectionList-module_item__h8jzG:hover {\n  background-color: rgba(80, 80, 80, 0.4);\n}\n\n.SelectionList-module_selection-list__GVyxt .SelectionList-module_item__h8jzG.active {\n  background-color: rgba(80, 80, 80, 0.6);\n}\n\n@media screen and (max-width: 767px) {\n  .SelectionList-module_selection-area__LHO43 button,\n  .fullscreen .SelectionList-module_selection-area__LHO43 button {\n    width: 40px;\n    height: 26px;\n  }\n\n  .SelectionList-module_selection-list__GVyxt {\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n  }\n\n  .SelectionList-module_selection-list__GVyxt .SelectionList-module_item__h8jzG {\n    padding: 12px 15px;\n  }\n}\n";
var styles$4 = {"selection-area":"SelectionList-module_selection-area__LHO43","open":"SelectionList-module_open__YSbaa","selection-list":"SelectionList-module_selection-list__GVyxt","item":"SelectionList-module_item__h8jzG"};
styleInject(css_248z$4);

const speedList = [{
  text: '0.25',
  value: 0.25
}, {
  text: '0.5',
  value: 0.5
}, {
  text: '0.75',
  value: 0.75
}, {
  text: 'Normal',
  value: 1
}, {
  text: '1.25',
  value: 1.25
}, {
  text: '1.5',
  value: 1.5
}, {
  text: '1.75',
  value: 1.75
}, {
  text: '2',
  value: 2
}];

function SpeedSelection(_ref) {
  let {
    speed,
    onChange
  } = _ref;
  const [isActive, setIsActive] = React.useState(false);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: classNames__default["default"]('speed-selection', styles$4['selection-area'], {
      open: isActive
    }),
    style: {
      marginLeft: 'auto'
    },
    children: [/*#__PURE__*/jsxRuntime.jsxs("button", {
      onClick: () => setIsActive(!isActive),
      children: [speed, "x"]
    }), /*#__PURE__*/jsxRuntime.jsx("ul", {
      className: styles$4['selection-list'],
      style: {
        visibility: !isActive ? 'hidden' : 'visible',
        opacity: !isActive ? 0 : 1
      },
      children: speedList.map((item, index) => /*#__PURE__*/jsxRuntime.jsx("li", {
        className: classNames__default["default"](styles$4.item, {
          active: item.value === speed
        }),
        onClick: () => onChange(item.value),
        children: item.text
      }, index))
    })]
  });
}

const buttonActiveBgStyle = 'rgba(255, 0, 0, 0.5)';

function SubtitleSelection(_ref) {
  let {
    videoRef,
    selectedSubtitle,
    onChange
  } = _ref;
  const [tracks, setTracks] = React.useState([]);
  const [isActive, setIsActive] = React.useState(false);
  React.useEffect(() => {
    const tracks = [];
    const textTracks = videoRef.current.textTracks;

    for (let i = 0; i < textTracks.length; i++) {
      tracks.push(textTracks[i]);
    }

    setTracks(tracks);
  }, [videoRef]);
  return /*#__PURE__*/jsxRuntime.jsx(jsxRuntime.Fragment, {
    children: tracks.length > 0 && /*#__PURE__*/jsxRuntime.jsxs("div", {
      className: classNames__default["default"]('subtitle-selection', styles$4['selection-area'], {
        open: isActive
      }),
      children: [/*#__PURE__*/jsxRuntime.jsx("button", {
        onClick: () => setIsActive(!isActive),
        style: {
          backgroundColor: selectedSubtitle && selectedSubtitle.language && buttonActiveBgStyle
        },
        children: "CC"
      }), /*#__PURE__*/jsxRuntime.jsxs("ul", {
        className: styles$4['selection-list'],
        style: {
          visibility: !isActive ? 'hidden' : 'visible',
          opacity: !isActive ? 0 : 1
        },
        children: [/*#__PURE__*/jsxRuntime.jsx("li", {
          className: classNames__default["default"](styles$4.item, {
            active: !selectedSubtitle
          }),
          onClick: () => onChange(null),
          children: "Off"
        }), tracks.map((track, index) => /*#__PURE__*/jsxRuntime.jsx("li", {
          className: classNames__default["default"](styles$4.item, {
            active: selectedSubtitle && track.language === selectedSubtitle.language
          }),
          onClick: () => onChange(track),
          children: track.label
        }, index))]
      })]
    })
  });
}

const formatVideoTime = time => {
  const allTimeStr = new Date(time * 1000).toISOString().substr(11, 8);
  const allTime = allTimeStr.split(':');
  const hours = allTime[0];
  const minutes = allTime[1];
  const seconds = allTime[2];
  const resultTime = [];

  if (parseInt(hours) > 0) {
    resultTime.push(parseInt(hours).toString());
  }

  if (parseInt(minutes) < 10 && parseInt(hours) > 0) {
    resultTime.push('0' + parseInt(minutes).toString());
  } else {
    resultTime.push(parseInt(minutes).toString());
  }

  resultTime.push(seconds);
  return resultTime.join(':');
};

var css_248z$3 = ".DisplayTime-module_time-display__dHg9t {\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  height: 100%;\n  margin-left: 10px;\n  color: #fff;\n}\n";
var styles$3 = {"time-display":"DisplayTime-module_time-display__dHg9t"};
styleInject(css_248z$3);

function DisplayTime(_ref) {
  let {
    currentTime,
    duration
  } = _ref;
  const [currentTimeLabel, setCurrentTimeLabel] = React.useState(formatVideoTime(currentTime));
  React.useEffect(() => {
    setCurrentTimeLabel(formatVideoTime(currentTime));
  }, [currentTime]);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: styles$3['time-display'],
    children: [currentTimeLabel, " / ", formatVideoTime(duration)]
  });
}

var css_248z$2 = ".VideoProgress-module_video-progress-wrapper__cFKP- {\n  position: absolute;\n  left: 20px;\n  right: 20px;\n  top: 0;\n  height: 3px;\n  z-index: 10;\n  cursor: pointer;\n\n  background-color: rgba(255, 255, 255, 0.2);\n  transition: height 0.1s var(--transition-timing-function),\n    transform 0.1s var(--transition-timing-function);\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP-:hover,\n.VideoProgress-module_video-progress-wrapper__cFKP-[data-dragging-bullet='true'] {\n  height: 6px;\n  transform: translateY(-1px);\n}\n\n.VideoProgress-module_selected-progress__tB3uK,\n.VideoProgress-module_load-progress__B-WQs {\n  position: absolute;\n  left: 0;\n  height: 100%;\n}\n\n.VideoProgress-module_load-progress__B-WQs {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n\n.VideoProgress-module_selected-progress-inner__7aajg {\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP-:hover .VideoProgress-module_selected-progress-inner__7aajg {\n  opacity: 1;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP-[data-dragging-bullet='true'] .VideoProgress-module_selected-progress__tB3uK {\n  background-color: #ff0000;\n}\n\n.VideoProgress-module_tooltip__Mao3- {\n  visibility: hidden;\n  position: absolute;\n  right: 0;\n  transform: translateX(50%);\n  bottom: 15px;\n  padding: 5px 7px;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP-:hover .VideoProgress-module_tooltip__Mao3-,\n.VideoProgress-module_video-progress-wrapper__cFKP-[data-dragging-bullet='true'] .VideoProgress-module_tooltip__Mao3- {\n  visibility: visible;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP- .progress-bar,\n.VideoProgress-module_video-progress-wrapper__cFKP- .progress-line {\n  height: 100%;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP- .progress-line {\n  background-color: #ff0000;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP- .progress-bullet {\n  background-color: transparent;\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP- .progress-bullet .inner {\n  background-color: #ff0000;\n  transform: scale(0);\n  transition: transform 0.1s var(--transition-timing-function);\n}\n\n.VideoProgress-module_video-progress-wrapper__cFKP-:hover .progress-bullet .inner,\n.VideoProgress-module_video-progress-wrapper__cFKP-[data-dragging-bullet='true']\n  .progress-bullet .inner {\n  transform: scale(1);\n}\n";
var styles$2 = {"video-progress-wrapper":"VideoProgress-module_video-progress-wrapper__cFKP-","selected-progress":"VideoProgress-module_selected-progress__tB3uK","load-progress":"VideoProgress-module_load-progress__B-WQs","selected-progress-inner":"VideoProgress-module_selected-progress-inner__7aajg","tooltip":"VideoProgress-module_tooltip__Mao3-"};
styleInject(css_248z$2);

function VideoProgress(_ref) {
  let {
    currentTime,
    loadedPercentage,
    duration,
    onProgressDown,
    onBulletStop
  } = _ref;
  const [selectedTime, setSelectedTime] = React.useState(0);
  const [draggingBullet, setDraggingBullet] = React.useState(false);
  const getCurrentPercentage = React.useCallback(() => {
    return currentTime / duration * 100;
  }, [currentTime, duration]);
  const getSelectedPercentage = React.useCallback(() => {
    return selectedTime / duration * 100 + '%';
  }, [selectedTime, duration]);
  const getLoadedPercentage = React.useCallback(() => {
    return loadedPercentage * 100 + '%';
  }, [loadedPercentage]);
  const handleProgressSelect = React.useCallback(value => {
    const selectedTimeResult = value / 100 * duration;
    setSelectedTime(selectedTimeResult);
  }, [duration]);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: styles$2['video-progress-wrapper'],
    "data-dragging-bullet": draggingBullet,
    children: [/*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$2['load-progress'],
      style: {
        width: getLoadedPercentage()
      }
    }), /*#__PURE__*/jsxRuntime.jsxs("div", {
      className: styles$2['selected-progress'],
      style: {
        width: getSelectedPercentage()
      },
      children: [/*#__PURE__*/jsxRuntime.jsx("div", {
        className: styles$2['selected-progress-inner']
      }), /*#__PURE__*/jsxRuntime.jsx("div", {
        className: styles$2['tooltip'],
        children: formatVideoTime(selectedTime)
      })]
    }), /*#__PURE__*/jsxRuntime.jsx(ProgressBar, {
      defaultValue: getCurrentPercentage(currentTime),
      onProgressDown: onProgressDown,
      onDrag: value => {
        handleProgressSelect(value);
        setDraggingBullet(true);
      },
      onDragStop: value => {
        onBulletStop(value);
        setDraggingBullet(false);
      },
      onHover: handleProgressSelect
    })]
  });
}

var css_248z$1 = ".VideoControls-module_video-controls__GlN9R {\n  --transition-timing-function: cubic-bezier(0.17, 0.67, 0.86, 0.56);\n\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 60px;\n  z-index: 10;\n  padding-top: 3px;\n  font-size: 14px;\n  transition: opacity 0.3s cubic-bezier(0.075, 0.82, 0.165, 1);\n}\n\n.VideoControls-module_fullscreen-button__dXH7f {\n  width: 36px;\n}\n\n.VideoControls-module_controls-background__z5nHh {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: calc(100% + 25px);\n  background: rgba(0, 0, 0, 0.3);\n  z-index: -1;\n  background: linear-gradient(\n    0deg,\n    rgba(0, 0, 0, 0.8) 0%,\n    rgba(0, 0, 0, 0.8) 20%,\n    rgba(0, 212, 255, 0) 100%\n  );\n}\n\n.VideoControls-module_controls-inner__xXiQJ {\n  display: flex;\n  align-items: center;\n  height: 100%;\n  padding: 0 15px;\n}\n\n.fullscreen .VideoControls-module_video-controls__GlN9R {\n  height: 80px;\n  font-size: 18px;\n}\n\n.hide-controls .VideoControls-module_video-controls__GlN9R {\n  opacity: 0;\n}\n\n@media screen and (max-width: 767px) {\n  .VideoControls-module_video-controls__GlN9R,\n  .fullscreen .VideoControls-module_video-controls__GlN9R {\n    height: 45px;\n    font-size: 12px;\n  }\n}\n";
var styles$1 = {"video-controls":"VideoControls-module_video-controls__GlN9R","fullscreen-button":"VideoControls-module_fullscreen-button__dXH7f","controls-background":"VideoControls-module_controls-background__z5nHh","controls-inner":"VideoControls-module_controls-inner__xXiQJ"};
styleInject(css_248z$1);

function VideoControls(_ref) {
  let {
    videoRef,
    status,
    fullscreenStatus,
    soundStatus,
    volume,
    speed,
    currentTime,
    duration,
    loadedPercentage,
    selectedSubtitle,
    onPlayClick,
    onVolumeClick,
    onFullscreenClick,
    onBulletDrag,
    onBulletStop,
    onProgressDown,
    onVolumeChange,
    onSpeedChange,
    onSubtitleChange
  } = _ref;
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: styles$1['video-controls'],
    children: [/*#__PURE__*/jsxRuntime.jsx("div", {
      className: styles$1['controls-background']
    }), /*#__PURE__*/jsxRuntime.jsx(VideoProgress, {
      currentTime: currentTime,
      loadedPercentage: loadedPercentage,
      duration: duration,
      onBulletDrag: onBulletDrag,
      onBulletStop: onBulletStop,
      onProgressDown: onProgressDown
    }), /*#__PURE__*/jsxRuntime.jsxs("div", {
      className: styles$1['controls-inner'],
      children: [/*#__PURE__*/jsxRuntime.jsx(Button, {
        onClick: onPlayClick,
        children: status === 'playing' ? /*#__PURE__*/jsxRuntime.jsx(SvgPause, {}) : /*#__PURE__*/jsxRuntime.jsx(SvgPlay, {})
      }), /*#__PURE__*/jsxRuntime.jsx(VolumeControl, {
        volume: volume,
        soundStatus: soundStatus,
        onVolumeClick: onVolumeClick,
        onVolumeChange: onVolumeChange
      }), /*#__PURE__*/jsxRuntime.jsx(DisplayTime, {
        currentTime: currentTime,
        duration: duration
      }), /*#__PURE__*/jsxRuntime.jsx(SpeedSelection, {
        speed: speed,
        onChange: onSpeedChange
      }), /*#__PURE__*/jsxRuntime.jsx(SubtitleSelection, {
        videoRef: videoRef,
        onChange: onSubtitleChange,
        selectedSubtitle: selectedSubtitle
      }), /*#__PURE__*/jsxRuntime.jsx(Button, {
        className: styles$1['fullscreen-button'],
        onClick: onFullscreenClick,
        children: fullscreenStatus ? /*#__PURE__*/jsxRuntime.jsx(SvgFullscreenExit, {}) : /*#__PURE__*/jsxRuntime.jsx(SvgFullscreen, {})
      })]
    })]
  });
}

var css_248z = ".SubtitleScreen-module_subtitle-screen__Fg1aw {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  bottom: 80px;\n  width: 100%;\n  font-size: 24px;\n  color: #fff;\n  text-align: center;\n\n  transition: bottom 0.3s ease;\n}\n\n.SubtitleScreen-module_subtitle-text__6C1Z9 {\n  display: block;\n}\n\n.SubtitleScreen-module_subtitle-visual-line__U8Mq3 {\n  padding: 0 0.4em;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n.hide-controls .SubtitleScreen-module_subtitle-screen__Fg1aw {\n  bottom: 40px;\n}\n\n.fullscreen .SubtitleScreen-module_subtitle-screen__Fg1aw {\n  font-size: 35px;\n  bottom: 100px;\n}\n\n@media screen and (max-width: 767px) {\n  .SubtitleScreen-module_subtitle-screen__Fg1aw {\n    bottom: 60px;\n    font-size: 14px;\n  }\n\n  .hide-controls .SubtitleScreen-module_subtitle-screen__Fg1aw {\n    bottom: 25px;\n  }\n\n  .fullscreen .SubtitleScreen-module_subtitle-screen__Fg1aw {\n    font-size: 16px;\n    bottom: 60px;\n  }\n}\n";
var styles = {"subtitle-screen":"SubtitleScreen-module_subtitle-screen__Fg1aw","subtitle-text":"SubtitleScreen-module_subtitle-text__6C1Z9","subtitle-visual-line":"SubtitleScreen-module_subtitle-visual-line__U8Mq3"};
styleInject(css_248z);

function SubtitleScreen(_ref) {
  let {
    cue
  } = _ref;

  if (cue.length === 0) {
    return null;
  }

  const {
    text
  } = cue[0];
  const textList = text.split('\n');
  return /*#__PURE__*/jsxRuntime.jsx("div", {
    className: styles['subtitle-screen'],
    children: textList.map((text, index) => /*#__PURE__*/jsxRuntime.jsx("span", {
      className: styles['subtitle-text'],
      children: /*#__PURE__*/jsxRuntime.jsx("span", {
        className: styles['subtitle-visual-line'],
        children: text
      })
    }, index))
  });
}

function VideoPlayer(_ref) {
  var _classNames;

  var children = _ref.children,
      poster = _ref.poster,
      title = _ref.title,
      volume = _ref.volume,
      playbackSpeed = _ref.playbackSpeed;

  var _videoRef = React.useRef(null);

  var videoPlayerRef = React.useRef(null);
  var volumeRef = React.useRef(null);
  var timeout = React.useRef(null);

  var _useState = React.useState(null),
      _useState2 = _slicedToArray__default["default"](_useState, 2),
      duration = _useState2[0],
      setDuration = _useState2[1];

  var _useState3 = React.useState(0),
      _useState4 = _slicedToArray__default["default"](_useState3, 2),
      currentTime = _useState4[0],
      setCurrentTime = _useState4[1];

  var _useState5 = React.useState(0),
      _useState6 = _slicedToArray__default["default"](_useState5, 2),
      loadedPercentage = _useState6[0],
      setLoadedPercentage = _useState6[1];

  var _useState7 = React.useState(null),
      _useState8 = _slicedToArray__default["default"](_useState7, 2),
      status = _useState8[0],
      setStatus = _useState8[1];

  var _useState9 = React.useState(null),
      _useState10 = _slicedToArray__default["default"](_useState9, 2),
      soundStatus = _useState10[0],
      setSoundStatus = _useState10[1];

  var _useState11 = React.useState(volume || 100),
      _useState12 = _slicedToArray__default["default"](_useState11, 2),
      volumeMount = _useState12[0],
      setVolumeMount = _useState12[1];

  var _useState13 = React.useState(Number(playbackSpeed) || 1),
      _useState14 = _slicedToArray__default["default"](_useState13, 2),
      speed = _useState14[0],
      setSpeed = _useState14[1];

  var _useState15 = React.useState(null),
      _useState16 = _slicedToArray__default["default"](_useState15, 2),
      selectedSubtitle = _useState16[0],
      setSelectedSubtitle = _useState16[1];

  var _useState17 = React.useState(false),
      _useState18 = _slicedToArray__default["default"](_useState17, 2),
      fullscreenStatus = _useState18[0],
      setFullscreenStatus = _useState18[1];

  var _useState19 = React.useState(true),
      _useState20 = _slicedToArray__default["default"](_useState19, 2),
      showControls = _useState20[0],
      setShowControls = _useState20[1];

  var _useState21 = React.useState(false),
      _useState22 = _slicedToArray__default["default"](_useState21, 2),
      hidePoster = _useState22[0],
      setHidePoster = _useState22[1];

  var play = React.useCallback(function () {
    var video = _videoRef.current;

    if (video.paused) {
      video.play();
      setStatus('playing');
    } else {
      video.pause();
      setStatus('paused');
    }
  }, []);
  var mute = React.useCallback(function () {
    var video = _videoRef.current;

    if (video.muted) {
      video.muted = false;
      setSoundStatus(null);
      setVolumeMount(volumeRef.current);
    } else {
      video.muted = true;
      setSoundStatus('muted');
      volumeRef.current = volumeMount;
      setVolumeMount(0);
    }
  }, [volumeMount]);
  var fullscreen = React.useCallback(function () {
    var videoPlayer = videoPlayerRef.current;

    if (!fullscreenStatus) {
      videoPlayer.requestFullscreen();
    } else {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      }
    }
  }, [fullscreenStatus]);
  var onProgress = React.useCallback(function () {
    var range = 0;
    var video = _videoRef.current;
    var buffered = video.buffered;

    if (buffered.length === 0 || currentTime <= 0) {
      return;
    }

    var loadStartPercentage = buffered.start(range) / duration;
    var loadEndPercentage = buffered.end(range) / duration;
    setLoadedPercentage(loadEndPercentage - loadStartPercentage);
  }, [currentTime, duration]);
  var handleShowControls = React.useCallback(function () {
    clearTimeout(timeout.current);
    setShowControls(true);

    if (status === 'playing') {
      timeout.current = setTimeout(function () {
        setShowControls(false);
      }, 3000);
    }
  }, [status]);
  var onLoadedData = React.useCallback(function () {
    var video = _videoRef.current;
    video.playbackRate = speed;
    setCurrentTime(video.currentTime);
    setDuration(video.duration);
  }, [speed]);
  var onTimeUpdate = React.useCallback(function () {
    var video = _videoRef.current;
    setCurrentTime(video.currentTime);
    onProgress();
  }, [onProgress]);
  var onEnded = React.useCallback(function () {
    clearTimeout(timeout.current);
    setStatus('paused');
    setShowControls(true);
  }, []);
  var handleProgressSelectEnter = React.useCallback(function (value) {
    var video = _videoRef.current;
    video.pause();
    video.currentTime = value / 100 * duration;
    setHidePoster(true);
  }, [duration]);
  var handleBulletStop = React.useCallback(function (value) {
    var selectedTimeResult = value / 100 * duration;
    var video = _videoRef.current;
    video.currentTime = selectedTimeResult;
    setCurrentTime(selectedTimeResult);

    if (status === 'playing') {
      var _video = _videoRef.current;

      _video.play();
    }
  }, [status, duration]);
  var handleVolumeChange = React.useCallback(function (volume) {
    setVolumeMount(volume);
    var video = _videoRef.current;
    video.volume = volume / 100;
  }, []);
  var handleSpeedChange = React.useCallback(function (speed) {
    setSpeed(speed);
    var video = _videoRef.current;
    video.playbackRate = speed;
  }, []);
  var handleSubtitleChange = React.useCallback(function (track) {
    var textTracks = _videoRef.current.textTracks;

    for (var i = 0; i < textTracks.length; i++) {
      textTracks[i].mode = 'disabled';

      if (track && textTracks[i].language === track.language) {
        textTracks[i].mode = 'showing';
      }
    }

    setSelectedSubtitle(track);
  }, []);
  React.useEffect(function () {
    handleVolumeChange(volumeMount);
  }, [volumeMount, handleVolumeChange]);
  React.useEffect(function () {
    handleSpeedChange(speed);
  }, [speed, handleSpeedChange]);
  React.useEffect(function () {
    document.addEventListener('fullscreenchange', function () {
      if (!document.fullscreenElement) {
        setFullscreenStatus(false);
      } else {
        setFullscreenStatus(true);
      }
    }, false);
  }, []);
  React.useEffect(function () {
    var textTracks = _videoRef.current.textTracks;

    for (var i = 0; i < textTracks.length; i++) {
      if (textTracks[i].mode === 'showing') {
        setSelectedSubtitle(textTracks[i]);
      }
    }
  }, [_videoRef]);
  return /*#__PURE__*/jsxRuntime.jsxs("div", {
    className: classNames__default["default"](styles$8['video-player'], (_classNames = {
      fullscreen: fullscreenStatus
    }, _defineProperty__default["default"](_classNames, status, status), _defineProperty__default["default"](_classNames, 'hide-controls', !showControls), _classNames)),
    ref: videoPlayerRef,
    onMouseMove: handleShowControls,
    children: [/*#__PURE__*/jsxRuntime.jsx(VideoScreen, {
      videoRef: function videoRef(el) {
        _videoRef.current = el;
      },
      hidePoster: hidePoster,
      title: title,
      status: status,
      poster: poster,
      onPlay: handleShowControls,
      onPause: handleShowControls,
      onLoadedData: onLoadedData,
      onTimeUpdate: onTimeUpdate,
      onEnded: onEnded,
      onClick: play,
      children: children
    }), duration && /*#__PURE__*/jsxRuntime.jsxs(jsxRuntime.Fragment, {
      children: [selectedSubtitle && selectedSubtitle.activeCues && /*#__PURE__*/jsxRuntime.jsx(SubtitleScreen, {
        cue: selectedSubtitle.activeCues
      }), /*#__PURE__*/jsxRuntime.jsx(VideoControls, {
        videoRef: _videoRef,
        status: status,
        fullscreenStatus: fullscreenStatus,
        soundStatus: soundStatus,
        volume: volumeMount,
        speed: speed,
        currentTime: currentTime,
        duration: duration,
        loadedPercentage: loadedPercentage,
        selectedSubtitle: selectedSubtitle,
        onPlayClick: play,
        onVolumeClick: mute,
        onVolumeChange: handleVolumeChange,
        onFullscreenClick: fullscreen,
        onBulletStop: handleBulletStop,
        onProgressDown: handleProgressSelectEnter,
        onSpeedChange: handleSpeedChange,
        onSubtitleChange: handleSubtitleChange
      })]
    })]
  });
}

module.exports = VideoPlayer;
